
<ul class="ps-section__links">      
    <li><a (click)="mostrarSecProducto(1)">Mis Productos</a></li>
    <li><a (click)="mostrarSecProducto(2)">Nuevo Producto</a></li>
</ul>

        <div class="ps-section__content" *ngIf="seccionListProducto">
            <div class="row centrar">
                <div class="col-md-12"><h2>Lista de productos</h2></div>
            </div>
        
        <dx-data-grid
            id="gridContainer"
            [dataSource]="listaproductos"
            keyExpr="id_producto"
            [showBorders]="true">
            <dxi-column
                dataField="imagen"
                [width]="100"
                [allowFiltering]="false"
                [allowSorting]="false"
                cellTemplate="cellTemplate"
            ></dxi-column>
            <dxi-column dataField="nombre" alignment="center" caption="Nombre Productos"></dxi-column>
            <dxi-column dataField="descripcion"  alignment="center"  caption="Descripcion"></dxi-column>
            <dxi-column dataField="precio"  alignment="center"  caption="Precio"></dxi-column>
            <dxi-column dataField="stock"  alignment="center"  caption="stock"></dxi-column>
            <dxi-column dataField="nombre_estado"  alignment="center"  caption="Estado"></dxi-column>
            <div *dxTemplate="let data of 'cellTemplate'">
                <img [src]="data.value" />
            </div>

            <dxi-column type="buttons"  caption="Editar">
                <dxi-button icon="fas fa-edit" [onClick]="editProduct"></dxi-button>    
            </dxi-column>
            <dxi-column type="buttons"  caption="Eliminar">
                <dxi-button icon="fas fa-trash-alt" [onClick]="deleteProduct"></dxi-button>    
            </dxi-column>
            <dxo-export [enabled]="true" fileName="Productos"></dxo-export>
                <dxo-paging [pageSize]="4"></dxo-paging>
                <dxo-pager
                    [showPageSizeSelector]="true"
                    [allowedPageSizes]="[5,8,10]"
                ></dxo-pager>
        </dx-data-grid>
    </div>

    <div class="ps-section__content" *ngIf="seccionNewProducto">
        <br>
        <div class="row">
        <div class="col-md-12" *ngIf="!isedicionpro;" style="text-align: center;"><h2>Nuevo Producto</h2></div>
        <div class="col-md-12" *ngIf="isedicionpro;" style="text-align: center;"><h2>Editar producto</h2></div>
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <div class="row">
                <div class="col-md-4">
                    <div class="col-md-12">
                        <img src="{{productonuevo.imagen}}" alt="">
                        <br><br><br>
                        <label>Escoge una imagen:</label><br>
                        <input type="file" class="btn color-principal" (change)="handleFileSelect($event)" height="5em">
                        <br>
                    </div>
                    
                </div>
                <div class="col-md-8">
                    <div class="row">
                        <div class="col-md-1"></div>
                        <div class="col-md-10">
                            <div class="ps-tabs">
                                <div class="ps-tab active">
                                    <div class="ps-form__content">
                                        <div class="form-group">
                                           <div class="row">
                                                <div class="col-md-3" style="margin-top: -1em;"><p>Nombre *</p></div>
                                                <div class="col-md-9">
                                                    <dx-text-box  [(value)]="productonuevo.nombre"  class="controles" placeholder="Nombre del producto"> </dx-text-box>       
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-3" style="margin-top: -1em;"><p>Categoria *</p></div>
                                                <div class="col-md-9">
                                                    <dx-select-box [items]="listacategorias" [(value)]="categorias.id_categoria"  valueExpr="id_categoria" displayExpr="descripcion_cat" placeholder="Selecciona la categoria"  (onValueChanged)="traersub($event)" ></dx-select-box>
                                                </div>
                                            </div>
                                            
                                        </div>

                                        <div class="form-group"  *ngIf="edicionsubcategoria" >
                                            <div class="row">
                                                <div class="col-md-3" style="margin-top: -1em;"><p>Subcategoria *</p></div>
                                                <div class="col-md-9">
                                                    <dx-select-box [items]="listasubcategorias" [(value)]="productonuevo.id_sub_categoria" valueExpr="id_sub_categoria" displayExpr="descripcion_sub" placeholder="Selecciona la subcategoria"></dx-select-box>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-3" style="margin-top: -1em;"><p>Precio *</p></div>
                                                <div class="col-md-9">
                                                    <dx-number-box [(value)]="productonuevo.precio" type="number" class="controles" placeholder="Precio"></dx-number-box>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-3" style="margin-top: -1em;"><p>Stock *</p></div>
                                                <div class="col-md-9">
                                                    <dx-number-box  [(value)]="productonuevo.stock" class="controles" placeholder="Stock"></dx-number-box>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" >
                                            <dx-text-area [height]="90" [maxLength]="500" [(value)]="productonuevo.descripcion" placeholder="Descripcion"></dx-text-area>
                                        </div>
                                        


                                        <div class="form-group" >
                                            <button class="ps-btn ps-btn--fullwidth color-principal" *ngIf="!isedicionpro;" (click)="verificarcampos()">Registrar</button>
                                        </div>
                                        <div class="form-group" >
                                            <button class="ps-btn ps-btn--fullwidth color-principal" *ngIf="isedicionpro;" (click)="verificarcampos()">Actualizar</button>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                        <div class="col-md-1"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-1"></div>
    </div>
                        
</div>



                        